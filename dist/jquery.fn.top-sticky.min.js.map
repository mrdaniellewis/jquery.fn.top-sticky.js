{"version":3,"sources":["jquery.fn.top-sticky.js"],"names":["$","window","max","min","onResize","resizing","onScroll","update","$collection","$scroll","$resize","windowHeight","$window","height","scrollTop","each","data","this","dataName","lastScrollTop","requestAnimationFrame","running","setScrollEvent","length","scrollEventSet","on","off","setResizeEvent","resizeEventSet","RESIZE","makeStickyClosure","el","parent","reset","$el","attr","$ghost","hide","setPosition","isResize","elResizing","setTimeout","top","lastPosition","is","$parent","width","outerWidth","outerHeight","css","display","position","ABSOLUTE","getDimension","active","lastState","add","not","POSITION","STATIC","offset","marginTop","MARGIN","marginLeft","marginBottom","marginRight","parentHeight","innerHeight","parentPaddingBottom","PADDING","currentOffset","windowTop","parentBottom","calculatedTop","left","visibility","margin","join","border","padding","insertAfter","show","x","remove","removeData","prop","val","parseFloat","isNaN","stickify","STICKY","nativeSupport","replace","m","indexOf","RAF","fn","support","unstickify","jQuery","Math"],"mappings":"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","file":"jquery.fn.top-sticky.min.js","sourcesContent":["/*!\n * jQuery.fn.top-sticky.js v1.0.0\n * Â© 2014 Daniel Lewis github.com/mrdaniellewis/jquery.fn.top-sticky.js\n * MIT license\n */\n\n/* jshint laxbreak: true, undef: true, browser: true, jquery: true */\n\n( function( $, window, max, min ) {\n\t\n\t\"use strict\";\n\n\tvar dataName = '.topSticky';\n\n\t// String constants for slightly better minification\n\tvar MARGIN = 'margin';\n\tvar POSITION = 'position';\n\tvar STICKY = 'sticky';\n\tvar PADDING = 'padding';\n\tvar RESIZE = 'resize';\n\tvar STATIC = 'static';\n\tvar ABSOLUTE = 'absolute';\n\n\t// Test for native support\n\tvar nativeSupport = $('<i style=\"010-webkit-1\"/>'\n\t\t.replace(/0|1/g,function(m) {\n\t\t\treturn [ POSITION + ':', STICKY + ';' ][m];\n\t\t}))\n\t\t.css(POSITION)\n\t\t.indexOf(STICKY) > -1;\n\n\t// Cross browser request animation frame\n\tvar RAF = 'equestAnimationFrame';\n\tvar requestAnimationFrame = window[ 'r' + RAF ] \n\t\t|| window[ 'webkitR' + RAF ] \n\t\t|| window[ 'mozR' + RAF ] \n\t\t|| window[ 'oR' + RAF ] \n\t\t|| function(fn) {\n\t\t\treturn setTimeout( fn, 0 ); // 0 results in less positioning errors and a smoother appearance\n\t\t};\n\n\tvar $window = $(window);\n\tvar windowHeight, scrollTop;\n\tvar lastScrollTop = -1;\n\n\t// Elements to check when scrolling.  Only visible elements with \"top\" set to a dimension are checked when scrolling.\n\tvar $scroll = $();\n\t// Elements to check when resizing.  All elements are checked when resizing.\n\tvar $resize = $();\n\n\t// Are we currently positioning\n\tvar running = false;\n\t// Are we currently resizing\n\tvar resizing = false;\n\n\t// Called when resizing\n\tfunction onResize() {\n\t\tresizing = true;\n\t\tonScroll();\n\t}\n\n\t// Update all elements\n\tfunction update() {\n\n\t\tvar $collection = $scroll;\n\t\t// Swap to the resize collection in a resize\n\t\tif ( resizing ) {\n\t\t\t$collection = $resize;\n\t\t}\n\n\t\twindowHeight = $window.height();\n\t\tscrollTop = $window.scrollTop();\n\n\t\t$collection.each( function() {\n\t\t\t$.data( this, dataName )(resizing);\n\t\t} );\n\n\t\tif ( lastScrollTop != scrollTop ) {\n\t\t\tlastScrollTop = scrollTop;\n\t\t\trequestAnimationFrame( update );\n\t\t} else {\n\t\t\trunning = resizing = false;\n\t\t}\n\t}\n\n\t// The scroll event - also called on a resize\n\tfunction onScroll() {\n\n\t\tif ( !running ) {\n\t\t\trequestAnimationFrame( update );\n\t\t\trunning = true;\n\t\t}\n\t}\n\n\t// Add or remove the global scroll event\n\tvar scrollEventSet = false;\n\tfunction setScrollEvent() {\n\t\tif ( !$scroll.length ) {\n\t\t\t$window.off( 'scroll' + dataName + ' touchmove' + dataName );\n\t\t} else if ( !scrollEventSet ) {\n\t\t\t$window.on( 'scroll' + dataName + ' touchmove' + dataName, onScroll );\n\t\t\tscrollEventSet = true;\n\t\t}\n\t}\n\n\t// Add or remove the global resize event\n\tvar resizeEventSet = false;\n\tfunction setResizeEvent() {\n\t\tif ( !$resize.length ) {\n\t\t\t$window.off( RESIZE + dataName );\n\t\t} else if ( !resizeEventSet ) {\n\t\t\t$window.on( RESIZE + dataName, onResize );\n\t\t\tresizeEventSet = true;\n\t\t}\n\t}\n\n\n\t// Creates the functions and holds the values for moving an element\n\t// A closure, while less readable, minifies rather better\n\tfunction makeStickyClosure(el, parent) {\n\t\tvar $el = $(el);\n\t\t\n\t\tvar lastPosition = '';\n\t\tvar $ghost = $();\n\t\tvar width, height, top, marginTop, marginLeft, marginBottom, marginRight, parentHeight, \n\t\t\tparentPaddingBottom, offset, windowHeight;\n\t\tvar active = false;\n\t\tvar lastState = false;\n\t\tvar elResizing = false;\n\t\tvar $parent;\n\n\t\t// Don't add it twice\n\t\tif ( $.data( el, dataName ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Reset back to the elements natural position\n\t\tfunction reset() {\n\t\t\t$el.attr('style','');\n\t\t\t$ghost.hide();\n\t\t}\n\n\t\tfunction setPosition(isResize) {\n\n\t\t\t// IE8/7 triggers a resize event on elements when its dimensions change\n\t\t\t// We need to make sure resizing an element on a resize event doesn't create an endless loop\n\t\t\telResizing = true;\n\t\t\tsetTimeout( function() {\n\t\t\t\telResizing = false;\n\t\t\t},0);\n\n\t\t\tif ( isResize ) {\n\n\t\t\t\ttop = null;\n\t\t\t\tlastPosition = '';\n\t\t\t\t\n\t\t\t\tif ( $el.is(':visible') ) {\n\n\t\t\t\t\t$parent = parent ? $(parent) : $el.parent();\n\n\t\t\t\t\t// Reset original size and position\n\t\t\t\t\treset();\n\n\t\t\t\t\twidth = $el.outerWidth();\n\t\t\t\t\theight = $el.outerHeight();\n\n\t\t\t\t\t\n\t\t\t\t\t// This is part is painful\n\t\t\t\t\t// We need to find if \"top\" is set and get its value in pixels\n\n\t\t\t\t\t// Hide the element and position it absolutely (for safari)\n\t\t\t\t\t// This gives us the actually CSS value of top\n\t\t\t\t\t$el.css( {display: 'none', position: ABSOLUTE } );\n\t\t\t\t\tif ( $el.css('top') == 'auto' ) {\n\t\t\t\t\t\t// Auto means it isn't set\n\t\t\t\t\t\ttop = null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Showing the element and calling $el.css('top')\n\t\t\t\t\t\t// Gives us the value top value in pixels for all browsers\n\t\t\t\t\t\t$el.css('display','');\n\t\t\t\t\t\ttop = getDimension( $el, 'top' );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Is the element an active sticky element\n\t\t\t\tactive = top !== null;\n\t\t\t\n\t\t\t\tif ( lastState !== active ) {\n\t\t\t\t\t// Add or remove from the scroll list\n\t\t\t\t\t// and set the event so scroll is only\n\t\t\t\t\t// running if it really needs to\n\t\t\t\t\tif ( active ) {\n\t\t\t\t\t\t$scroll = $scroll.add(el);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scroll = $scroll.not(el);\n\t\t\t\t\t}\n\t\t\t\t\tlastState = active;\n\t\t\t\t\tsetScrollEvent();\n\t\t\t\t}\n\n\t\t\t\tif ( !active ) {\n\t\t\t\t\treset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get the normal position\n\t\t\t\t$el.css(POSITION, STATIC);\n\t\t\t\toffset = $el.offset();\n\n\t\t\t\t// We need all the margins for the ghost\n\t\t\t\tmarginTop = getDimension( $el, MARGIN + 'Top' ) || 0;\n\t\t\t\tmarginLeft = getDimension( $el, MARGIN + 'Left' ) || 0;\n\t\t\t\tmarginBottom = getDimension( $el, MARGIN + 'Bottom' ) || 0;\n\t\t\t\tmarginRight = getDimension( $el, MARGIN + 'Right' ) || 0;\n\n\t\t\t\tparentHeight = $parent.innerHeight();\n\t\t\t\tparentPaddingBottom = getDimension( $parent, PADDING + 'Bottom' );\n\t\t\t}\n\n\t\t\t// Figure out where to position the top of the element\n\t\t\tvar position = '';\n\t\t\tvar currentOffset = $el.offset();\n\t\t\tvar windowTop = scrollTop + top;\n\t\t\tvar parentBottom = $parent.offset().top + parentHeight - parentPaddingBottom - height - marginBottom;\n\t\t\tvar calculatedTop = max( \n\t\t\t\toffset.top,\n\t\t\t\tmin( \n\t\t\t\t\twindowTop,\n\t\t\t\t\tparentBottom\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// Based on our position decide if the element is static, fixed or absolute\n\t\t\tif ( offset.top === calculatedTop ) {\n\t\t\t\tposition = STATIC;\n\t\t\t} else if ( calculatedTop === windowTop ) {\n\t\t\t\tposition = 'fixed';\n\t\t\t} else if ( calculatedTop === parentBottom ) {\n\t\t\t\tposition = ABSOLUTE;\n\t\t\t}\n\n\t\t\t// Only reposition if we have to\n\t\t\tif ( lastPosition != position || currentOffset.left != offset.left ) {\n\n\t\t\t\tlastPosition = position;\n\n\t\t\t\tif ( position == STATIC ) {\n\t\t\t\t\treset();\n\t\t\t\t\t$ghost.hide();\n\t\t\t\t\treturn;\n\t\t\t\t} \n\n\t\t\t\t$el\n\t\t\t\t\t.css( POSITION, position )\n\t\t\t\t\t.offset({ top: calculatedTop, left: offset.left })\n\t\t\t\t\t.outerWidth(width)\n\t\t\t\t\t.outerHeight(height);\n\n\t\t\t\t// If the position is anything other than static we need to create a \"ghost\"\n\t\t\t\t// element of the same size and position to keep the position\n\t\t\t\tif ( !$ghost.length ) {\n\t\t\t\t\t$ghost = $('<div>')\n\t\t\t\t\t\t.css( {\n\t\t\t\t\t\t\tvisibility: 'hidden',\n\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\theight: height,\n\t\t\t\t\t\t\tmargin: [marginTop,marginRight,marginBottom,marginLeft].join('px ') + 'px',\n\t\t\t\t\t\t\tborder: 0,\n\t\t\t\t\t\t\tpadding: 0\n\t\t\t\t\t\t} )\n\t\t\t\t\t\t.insertAfter($el);\n\t\t\t\t}\n\t\t\t\t$ghost.show();\n\n\t\t\t}\n\t\t}\n\n\t\t// Function to remove the stickyness\n\t\tsetPosition.x = function() {\n\t\t\tif ( $ghost ) {\n\t\t\t\t$ghost.remove();\t\t\t\t\n\t\t\t}\n\n\t\t\t$el\n\t\t\t\t.css(reset)\n\t\t\t\t.off(dataName)\n\t\t\t\t.removeData(dataName);\n\n\t\t\t$resize = $resize.not(el);\n\t\t\t$scroll = $scroll.not(el);\n\t\t\tsetScrollEvent();\n\t\t\tsetResizeEvent();\t\t\n\t\t};\n\n\t\t$resize = $resize.add(el);\n\t\t$.data( el, dataName, setPosition );\n\t\tsetResizeEvent();\n\t\t$el.on( RESIZE + dataName, function() {\n\t\t\t// Prevent endless loops in IE8, see above\n\t\t\tif ( elResizing ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetPosition(true);\n\t\t} );\n\n\t\t// Set the initial position\n\t\tsetPosition(true);\n\t}\n\n\t// Get the dimension of a CSS property in pixels\n\tfunction getDimension($el,prop) {\n\t\tvar val = parseFloat($el.css(prop));\n\t\tif ( isNaN(val) ) {\n\t\t\tval = null;\n\t\t}\n\t\treturn val;\n\t}\n\n\t// Make an element sticky\n\tfunction stickify(parent) {\n\t\t/* jshint -W040 */\n\t\tthis.each(function() {\n\t\t\tmakeStickyClosure(this,parent);\n\t\t} );\n\t\treturn this;\n\t}\n\n\tstickify.support = nativeSupport;\n\t$.fn.stickify = stickify;\n\n\t$.fn.unstickify = function() {\n\t\tthis.each( function() {\n\t\t\tvar fn = $.data(this,dataName);\n\t\t\tif ( fn ) {\n\t\t\t\tfn.x();\n\t\t\t}\n\t\t} );\n\t\treturn this;\n\t};\n\n\n}( jQuery, window, Math.max, Math.min ) );"],"sourceRoot":"/source/"}